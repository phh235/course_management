<!DOCTYPE html><html lang="en" xmlns:th="http://www.thymeleaf.org"><head>	<meta charset="UTF-8"/>	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>	<link rel="icon" href="https://www.udemy.com/staticx/udemy/images/v8/favicon-32x32.png">	<!--=============== REMIXICONS ===============-->	<link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.4.0/remixicon.css}"				crossorigin=""/>	<!-- Font Awesome -->	<link			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"			rel="stylesheet"	/>	<!-- MDB -->	<link			href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.min.css"			rel="stylesheet"	/>	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>	<!--=============== CSS ===============-->	<link rel="stylesheet" th:href="@{/assets/css/styles.css}"/>	<title>Course Management</title></head><body><!-- Sidebar bg --><!-- <img src="assets/img/sidebar-bg.jpg" alt="sidebar img" class="bg-image"> --><!--=============== HEADER ===============--><header class="header">	<div class="header__container container">		<div class="header__toggle" id="header-toggle">			<i class="ri-menu-line"></i>		</div>	</div></header><!--=============== SIDEBAR ===============--><div th:replace="~{admin/sidebar :: sidebar}"></div><!--=============== MAIN ===============--><main class="main container" id="main">	<div>		<h1>NGƯỜI DÙNG</h1>		<!-- Tabs navs -->		<ul class="nav nav-tabs mb-3" id="ex1" role="tablist">			<li class="nav-item" role="presentation">				<a						data-mdb-tab-init						data-mdb-ripple-init data-mdb-ripple-color="primary"						class="nav-link active"						style="font-size: 15px"						id="ex1-tab-1"						href="#ex1-tabs-1"						role="tab"						aria-controls="ex1-tabs-1"						aria-selected="true"				><i class="fas fa-table fa-fw me-2"></i>Thông tin</a				>			</li>			<li class="nav-item" role="presentation">				<a						data-mdb-tab-init						data-mdb-ripple-init data-mdb-ripple-color="primary"						class="nav-link"						style="font-size: 15px"						id="ex1-tab-2"						href="#ex1-tabs-2"						role="tab"						aria-controls="ex1-tabs-2"						aria-selected="false"				><i class="fas fa-folder-plus fa-fw me-2"></i> Lưu thông tin</a				>			</li>		</ul>		<!-- Tabs navs -->		<!-- Tabs content -->		<div class="tab-content" id="ex1-content">			<div					class="tab-pane fade show active"					id="ex1-tabs-1"					role="tabpanel"					aria-labelledby="ex1-tab-1"			>				<table class="table align-middle">					<thead>					<tr>						<th scope="col">Mã học viên</th>						<th scope="col">Tên người dùng</th>						<th scope="col">Mật khẩu</th>						<th scope="col">Họ tên</th>						<th scope="col">Email</th>						<th scope="col">Giới tính</th>						<th scope="col">Ngày sinh</th>						<th scope="col">Điện thoại</th>						<th scope="col">Ảnh</th>						<th scope="col">Role</th>						<th scope="col">Chức năng</th>					</tr>					</thead>					<tbody>					<tr th:each="user : ${users}">						<td th:text="${user.userId}"></td>						<td th:text="${user.username}"></td>						<td th:text="${user.password}"></td>						<td th:text="${user.fullName}"></td>						<td th:text="${user.email}"></td>						<td th:text="${user.gender}"></td>						<td th:text="${user.birthday}"></td>						<td th:text="${user.phoneNumber}"></td>						<td><img th:src="@{${user.avatar}}" alt="User Avatar" width="50" height="50"></td>						<td th:text="${user.role.roleName}"></td>						<td>							<button type="button" class="btn btn-primary" data-mdb-ripple-init th:data="${user.userId}"											onclick="updateUserInfo(this)">Chỉnh sửa							</button>							<button type="button" class="btn btn-danger" data-mdb-ripple-init											th:data="${user.userId}" onclick="deleteUser(this)">Xóa							</button>						</td>					</tr>					</tbody>				</table>			</div>			<div class="tab-pane fade" id="ex1-tabs-2" role="tabpanel" aria-labelledby="ex1-tab-2">				<form style="width: 26rem">					<div data-mdb-input-init class="form-outline mb-4">						<input type="text" id="userIdInput" class="form-control form-control-lg"/>						<label class="form-label" for="userIdInput">ID</label>					</div>					<div data-mdb-input-init class="form-outline mb-4">						<input type="text" id="usernameInput" class="form-control form-control-lg"/>						<label class="form-label" for="usernameInput">Tên người dùng</label>					</div>					<div data-mdb-input-init class="form-outline mb-4">						<input type="text" id="passwordInput" class="form-control form-control-lg"/>						<label class="form-label" for="passwordInput">Mật khẩu</label>					</div>					<div data-mdb-input-init class="form-outline mb-4">						<input type="text" id="fullNameInput" class="form-control form-control-lg"/>						<label class="form-label" for="fullNameInput">Họ tên</label>					</div>					<div data-mdb-input-init class="form-outline mb-4">						<input type="text" id="emailInput" class="form-control form-control-lg"/>						<label class="form-label" for="emailInput">Email</label>					</div>					<label class="form-label me-3" for="inlineRadioOptions">Giới tính</label>					<div class="form-check form-check-inline mb-4">						<input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"									 value="true"/>						<label class="form-label" for="inlineRadio1">Nam</label>					</div>					<div class="form-check form-check-inline mb-4">						<input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"									 value="false"/>						<label class="form-label" for="inlineRadio2">Nữ</label>					</div>					<div data-mdb-input-init class="form-outline mb-4">						<input type="date" id="birthdayInput" class="form-control form-control-lg"/>						<label class="form-label" for="birthdayInput">Ngày sinh</label>					</div>					<div data-mdb-input-init class="form-outline mb-4">						<input type="text" id="phoneNumberInput" class="form-control form-control-lg"/>						<label class="form-label" for="phoneNumberInput">Số điện thoại</label>					</div>					<div class="d-flex align-items-center">						<button data-mdb-ripple-init class="btn btn-lg btn-primary me-2"										onclick="postUserInfo()">Xác nhận						</button>						<button data-mdb-ripple-init data-mdb-ripple-color="primary"										type="button" class="btn btn-lg btn-secondary" onclick="resetForm()">Làm mới						</button>					</div>				</form>			</div>		</div>		<!-- Tabs content -->	</div></main><!--=============== MAIN JS ===============--><script th:src="@{/assets/js/main.js}"></script><!-- Axios --><script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script><script>    function resetForm() {        document.getElementById('usernameInput').value = '';        document.getElementById('passwordInput').value = '';        document.getElementById('fullNameInput').value = '';        document.getElementById('emailInput').value = '';        document.getElementById('birthdayInput').value = '';        document.getElementById('phoneNumberInput').value = '';        const genderRadios = document.getElementsByName('inlineRadioOptions');        for (let i = 0; i < genderRadios.length; i++) {            genderRadios[i].checked = false;        }    }    function deleteUser(button) {        var userId = button.getAttribute("data");        console.log('User: ' + userId)        console.log(button)        Swal.fire({            title: 'Bạn có chắc chắn muốn xóa người dùng này?',            icon: 'warning',            showCancelButton: true,            confirmButtonColor: '#3b71ca',            cancelButtonColor: '#dc4c64',            confirmButtonText: 'Có, xóa nó!'        }).then((result) => {            if (result.isConfirmed) {                axios.delete(`/user-api/deleteUserById/${userId}`)                    .then(response => {                        if (response.data.success) {                            Swal.fire(                                'Đã xóa!',                                'Người dùng đã được xóa.',                                'success'                            ).then(() => {                                location.reload();                            });                        } else {                            Swal.fire(                                'Lỗi!',                                'Không thể xóa người dùng.',                                'error'                            );                        }                    })                    .catch(error => {                        Swal.fire(                            'Lỗi!',                            'Đã xảy ra lỗi.',                            'error'                        );                    });            }        });    }    function postUserInfo() {        const userId = document.getElementById('userIdInput').value;        const username = document.getElementById('usernameInput').value;        const password = document.getElementById('passwordInput').value;        const fullName = document.getElementById('fullNameInput').value;        const email = document.getElementById('emailInput').value;        // Kiểm tra xem có phần tử radio nào được chọn chưa        const genderInput = document.querySelector('input[name="gender"]:checked');        const gender = genderInput ? genderInput.value : null;        const birthday = document.getElementById('birthdayInput').value;        const phoneNumber = document.getElementById('phoneNumberInput').value;        let insertUser = {}        if (userId) {            insertUser = {                userId: userId,                username: username,                password: password,                fullName: fullName,                email: email,                gender: gender,                birthday: birthday,                phoneNumber: phoneNumber            };        } else {            insertUser = {                username: username,                password: password,                fullName: fullName,                email: email,                gender: gender,                birthday: birthday,                phoneNumber: phoneNumber            };        }        axios.post('/user-api/postSaveUser', insertUser)            .then(response => {                if (!document.getElementById('userIdInput').value) {                    if (response.data.success) {                        Swal.fire({                            icon: 'success',                            title: 'Thêm người dùng thành công',                            text: 'Thông tin người dùng đã được thêm thành công.'                        });                    } else {                        Swal.fire({                            icon: 'error',                            title: 'Thêm người dùng thất bại',                            text: 'Đã xảy ra lỗi khi thêm thông tin người dùng. Vui lòng thử lại sau.'                        });                    }                } else {                    if (response.data.success) {                        Swal.fire({                            icon: 'success',                            title: 'Cập nhật thông tin thành công',                            text: 'Thông tin người dùng đã cập nhật thành công.'                        });                    } else {                        Swal.fire({                            icon: 'error',                            title: 'Cập nhật thông tin thất bại',                            text: 'Đã xảy ra lỗi khi cập nhật thông tin người dùng. Vui lòng thử lại sau.'                        });                    }                }            })            .catch(error => {                console.error('Error:', error);                Swal.fire({                    icon: 'error',                    title: 'Lỗi',                    text: 'Đã xảy ra lỗi khi gửi yêu cầu. Vui lòng thử lại sau.'                });            });    }    function updateUserInfo(button) {        document.getElementById('ex1-tab-1').classList.toggle('active')        document.getElementById('ex1-tab-1').classList.toggle('ripple-surface-primary')        document.getElementById('ex1-tabs-1').classList.toggle('active')        document.getElementById('ex1-tabs-1').classList.toggle('show')        document.getElementById('ex1-tab-2').classList.toggle('active')        document.getElementById('ex1-tab-2').classList.toggle('ripple-surface-primary')        document.getElementById('ex1-tabs-2').classList.toggle('active')        document.getElementById('ex1-tabs-2').classList.toggle('show')        let tds = button.parentElement.parentElement.getElementsByTagName('td')        let data = Array.from(tds).map((td) => td.textContent)        let account = {            userId: data[0],            username: data[1],            password: data[2],            fullName: data[3],            email: data[4],            gender: data[5],            birthday: data[6],            phoneNumber: data[7]        }        fillDataToForm(account)    }    fillDataToForm = (account) => {        console.log(account.userId)        document.getElementById('userIdInput').value = account.userId;        document.getElementById('userIdInput').focus();        document.getElementById('usernameInput').value = account.username;        document.getElementById('usernameInput').focus();        document.getElementById('passwordInput').value = account.password;        document.getElementById('passwordInput').focus();        document.getElementById('fullNameInput').value = account.fullName;        document.getElementById('fullNameInput').focus();        document.getElementById('emailInput').value = account.email;        document.getElementById('emailInput').focus();        document.getElementById('inlineRadio1').setAttribute('checked', account.gender)        document.getElementById('inlineRadio2').setAttribute('checked', !account.gender)        document.getElementById('inlineRadio1').focus();        document.getElementById('birthdayInput').value = account.birthday;        document.getElementById('birthdayInput').focus();        document.getElementById('phoneNumberInput').value = account.phoneNumber;        document.getElementById('phoneNumberInput').focus();    }</script><!-- MDB --><script		type="text/javascript"		src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.umd.min.js"></script></body></html>