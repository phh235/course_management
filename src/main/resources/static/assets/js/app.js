window.onload = function () {    let loggedInUser = localStorage.getItem('loggedInUser');    // Nếu có người dùng đã đăng nhập, ẩn nút "Đăng nhập" và "Đăng ký"    document.querySelectorAll('.hide-on-login').forEach(function (element) {        element.style.display = 'none';    });    document.querySelectorAll('.show-on-login').forEach(function (element) {        element.style.display = 'block';    });    if (!loggedInUser) {        document.querySelectorAll('.hide-on-login').forEach(function (element) {            element.style.display = 'block';        });        document.querySelectorAll('.show-on-login').forEach(function (element) {            element.style.display = 'none';        });    }    if (loggedInUser) {        let user = JSON.parse(loggedInUser);        console.log('UserID: ' + user.userId);        console.log('Role: ' + user.role.roleName);        userId = user.userId;        window.onload = function () {            let loggedInUser = localStorage.getItem('loggedInUser');            // Nếu có người dùng đã đăng nhập, ẩn nút "Đăng nhập" và "Đăng ký"            document.querySelectorAll('.hide-on-login').forEach(function (element) {                element.style.display = 'none';            });            if (loggedInUser) {                let user = JSON.parse(loggedInUser);                console.log('UserID: ' + user.userId);                console.log('Role: ' + user.role.roleName);                userId = user.userId;                // Cập nhật thông tin người dùng                document.getElementById('usernameDisplay').textContent = user.fullName || "Guest";                document.getElementById('fullnameDisplay').textContent = user.fullName || "fullname_display";                document.getElementById('usernameDisplay_2').textContent = user.username || "username_display";                document.getElementById('fullName').textContent = user.fullName || "fullname";                document.getElementById('email').textContent = user.email || "email";                document.getElementById('phoneNumber').textContent = user.phoneNumber || "09xxxx";                document.getElementById('birthday').textContent = user.birthday || "xx-xx-xxxx";                document.getElementById('userAvatar').src = user.avatarUrl || "/assets/img/spiderman.jpg";                document.getElementById('userNameInput').value = user.username || '';                document.getElementById('fullNameInput').value = user.fullName || '';                console.log('Fullname: ' + user.fullName)                document.getElementById('emailInput').value = user.email || '';                document.getElementById('phoneNumberInput').value = user.phoneNumber || '';                document.getElementById('birthdayInput').value = user.birthday || '';                // Nếu có giới tính, chọn nút radio tương ứng                if (user.gender === 'true') {                    document.getElementById('inlineRadio1').checked = true;                } else if (user.gender === 'false') {                    document.getElementById('inlineRadio2').checked = true;                }                return user.userId;            }        };        document.getElementById('logoutButton').addEventListener('click', function () {            // Xóa thông tin người dùng khỏi localStorage            console.log(1)            localStorage.removeItem('loggedInUser');            // Chuyển hướng đến trang đăng nhập            window.location.href = '/account/dang-nhap';        });        // Cập nhật thông tin người dùng        document.getElementById('usernameDisplay').textContent = user.fullName || "Guest";        document.getElementById('fullnameDisplay').textContent = user.fullName || "fullname_display";        document.getElementById('usernameDisplay_2').textContent = user.username || "username_display";        document.getElementById('fullName').textContent = user.fullName || "fullname";        document.getElementById('email').textContent = user.email || "email";        document.getElementById('phoneNumber').textContent = user.phoneNumber || "09xxxx";        document.getElementById('birthday').textContent = user.birthday || "xx-xx-xxxx";        document.getElementById('userAvatar').src = user.avatarUrl || "/assets/img/spiderman.jpg";        document.getElementById('userNameInput').value = user.username || '';        document.getElementById('fullNameInput').value = user.fullName || '';        console.log('Fullname: ' + user.fullName)        document.getElementById('emailInput').value = user.email || '';        document.getElementById('phoneNumberInput').value = user.phoneNumber || '';        document.getElementById('birthdayInput').value = user.birthday || '';        // Nếu có giới tính, chọn nút radio tương ứng        if (user.gender === 'true') {            document.getElementById('inlineRadio1').checked = true;        } else if (user.gender === 'false') {            document.getElementById('inlineRadio2').checked = true;        }        return user.userId;    }};function updateUserInfo(userId) {    let username = document.getElementById('userNameInput').value;    let fullName = document.getElementById('fullNameInput').value;    let email = document.getElementById('emailInput').value;    let phoneNumber = document.getElementById('phoneNumberInput').value;    let birthday = document.getElementById('birthdayInput').value;    let newPassword = document.getElementById('newPassword').value;    // Kiểm tra xem có phần tử radio nào được chọn chưa    let genderInput = document.querySelector('input[name="gender"]:checked');    let gender = genderInput ? genderInput.value : null;    let updatedUser = {        userId: userId,        username: username,        fullName: fullName,        email: email,        phoneNumber: phoneNumber,        birthday: birthday,        gender: gender,        password: newPassword    };    // Gửi yêu cầu PUT đến máy chủ backend    axios.post('/user-api/postSaveUser', updatedUser)        .then(response => {            // Xử lý kết quả từ server            console.log(response.data);            console.log(response.data.data);            // Hiển thị thông báo thành công hoặc thất bại            if (response.data.success) {                Swal.fire({                    icon: 'success',                    title: 'Cập nhật thành công',                    text: 'Thông tin cá nhân đã được cập nhật thành công.'                });            } else {                Swal.fire({                    icon: 'error',                    title: 'Cập nhật thất bại',                    text: 'Đã xảy ra lỗi khi cập nhật thông tin cá nhân. Vui lòng thử lại sau.'                });            }        })        .catch(error => {            console.error('Error:', error);            // Xử lý lỗi khi gửi request            // Hiển thị thông báo lỗi cho người dùng            Swal.fire({                icon: 'error',                title: 'Lỗi',                text: 'Đã xảy ra lỗi khi gửi yêu cầu. Vui lòng thử lại sau.'            });        });}